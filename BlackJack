'''This program is an BlackJack Python implementation
Author: Wahab Ehsan'''
import random
import sys
import deck


class BlackJack:
    thedeck = None
    hand = []
    picked = []

    def __init__(self):
        self.thedeck = deck.DeckOfCards()
        self.picked = [False] * 52

    def pickTwo(self):
        print("Your first two cards: ")
        firstcardi = 0
        secondcardi = 0
        while firstcardi == secondcardi:
            firstcardi = random.randrange(0, 52)
            secondcardi = random.randrange(0, 52)
        firstcard = self.thedeck.cards[firstcardi]
        secondcard = self.thedeck.cards[secondcardi]
        self.hand = [firstcard, secondcard]
        self.picked[firstcardi] = True
        self.picked[secondcardi] = True
        print(firstcard.toString())
        print(secondcard.toString())
        print("The sum of cards in your hand is: ")
        # print(firstcard.get_weight())
        # print(secondcard.get_weight())
        sum = firstcard.get_weight() + secondcard.get_weight()
        print(sum)
        if sum == 21:
            return False
        else:
            return True

    def hitMe(self):
        loop = True
        num = random.randrange(0, 52)
        nextCard = self.thedeck.cards[num]
        while loop:
            for x in self.hand:
                if x == nextCard:
                    num = random.randrange(0, 52)
                    nextCard = self.thedeck.cards[num]
                    continue
                else:
                    loop = False
        self.hand.append(nextCard)
        self.picked[num] = True
        print(nextCard.toString())
        print("All your cards in hand: ")
        sum = 0
        for x in self.hand:
            print(x.toString())
            sum += x.get_weight()
        print("The sum of cards in your hand is: ")
        print(sum)
        if sum > 21:
            return False
        else:
            return True


def main():
    userInterface()


def userInterface():
    print("Hello and Welcome to CardGame!")
    print("What would you like to play? (BlackJack)")
    input = sys.stdin.readline()
    while not (input.__contains__("BlackJack") or input.__contains__("blackjack") or input.__contains__("Blackjack")):
        print("Invalid input. Please enter a card game.")
        input = sys.stdin.readline()
    game = BlackJack()
    initiateBJGame(game)


def initiateBJGame(game):
    loop = True
    pick_two_bool = game.pickTwo()
    if not pick_two_bool:
        print("Woah! 21 already!")
        loop = False
    while loop:
        print("Hit You? or Ready to show? (Type \"hitme\" or \"ready\")")
        inp = sys.stdin.readline()
        while not (inp.__contains__("hitme") or inp.__contains__("ready") or inp.__contains__("hit")):
            print("Invalid input. Please enter \"hitme\" or \"ready\"")
            inp = sys.stdin.readline()
        if inp.__contains__("hitme") or inp.__contains__("hit"):
            print("Card added to your hand: ")
            hit_me_bool = game.hitMe()
            if not hit_me_bool:
                print("Bust! Try again :(")
                loop = False
        else:
            loop = False


if __name__ == '__main__':
    main()






